<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Control - UCPT Kids</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Fredoka', sans-serif; background-color: #f0f4f8; margin: 0; color: #333; }
        header { background-color: #FF6B6B; color: white; padding: 1rem; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        h1 { margin: 0; font-size: 1.5rem; }
        .container { padding: 20px; max-width: 600px; margin: 0 auto; }
        .actions { display: flex; gap: 10px; margin-bottom: 20px; }
        .btn { flex: 1; padding: 15px; border: none; border-radius: 12px; font-size: 1rem; font-weight: bold; cursor: pointer; color: white; text-align: center; text-decoration: none; }
        .btn-add { background-color: #4ECDC4; }
        .btn-logout { background-color: #556270; flex: 0.3;} 
        #students-list { list-style: none; padding: 0; }
        .student-card { background: white; border-radius: 15px; padding: 15px; margin-bottom: 15px; display: flex; align-items: center; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .avatar { width: 50px; height: 50px; background-color: #ddd; border-radius: 50%; margin-right: 15px; object-fit: cover; }
        .info h3 { margin: 0 0 5px 0; font-size: 1.1rem; }
        .info p { margin: 0; color: #777; font-size: 0.9rem; }
    </style>
</head>
<body>
    <header><h1>üçé Aula Virtual</h1></header>
    <div class="container">
        <div class="actions">
            <a href="/add-student" class="btn btn-add">Ôºã Nuevo Alumno</a>
            <a href="/login" class="btn btn-logout">Salir</a>
        </div>
        <h2 style="color: #556270;">Mis Alumnos</h2>
        <div id="loading" style="text-align: center; color: #888;">Cargando lista...</div>
        <ul id="students-list"></ul>
    </div>

    <script>
        fetch('/api/students')
            .then(response => response.json())
            .then(data => {
                const list = document.getElementById('students-list');
                document.getElementById('loading').style.display = 'none';
                if (data.length === 0) { list.innerHTML = '<p style="text-align:center">A√∫n no hay alumnos.</p>'; return; }
                data.forEach(student => {
                    const li = document.createElement('li');
                    li.className = 'student-card';
                    const foto = student.foto_perfil || 'https://cdn-icons-png.flaticon.com/512/3135/3135715.png';
                    li.innerHTML = `<img src="${foto}" class="avatar"><div class="info"><h3>${student.nombre_completo}</h3><p>${student.edad} a√±os</p></div>`;
                    list.appendChild(li);
                });
            });
    </script>
</body>
</html>